<!--
/// ==========================================
/// File Name:    profile.html
/// Created By:   Wyatt Bechtle
/// Created On:   2025-10-04
/// Purpose:      Provides a user profile page for the web application.
///  Updated By: 
///  Update Notes: 
///
/// ==========================================
-->
<!doctype html>
<html lang="en" xmlns:th="https://www.thymeleaf.org/" data-bs-theme="dark">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>User Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" 
          crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" 
          rel="stylesheet">
  </head>
  <body class="bg-dark text-light">

    <div th:replace="~{fragments/navbar :: navbar}"></div>

    <main class="container my-4">
      <section th:if="${param.updated}" 
               class="alert alert-success">Profile updated successfully.</section>
      <!-- User Profile Section -->
      <section class="bg-body-tertiary border rounded-3 p-3 p-md-4 mb-4">
        <h1 class="h4 mb-3">
          <i class="bi bi-person-circle me-2"></i>Your Profile
        </h1>
        <p class="mb-1">
          <strong>Name:</strong>
          <span th:text="${#strings.defaultString(user.firstName,'')}"></span>
          <span th:text="${#strings.defaultString(user.lastName,'')}"></span>
        </p>
        <p class="mb-1">
          <strong>Username:</strong> 
          <span th:text="${user.username}">username</span>
        </p>
        <p class="mb-3">
          <strong>Email:</strong> 
          <span th:text="${user.email}">email@example.com</span>
        </p>
        <a class="btn btn-primary" th:href="@{/profile/edit}">
          <i class="bi bi-pencil-square me-2"></i>Edit Profile
        </a>
      </section>
      <!-- Character Section -->
      <section class="bg-body-tertiary border rounded-3 p-3 p-md-4 mb-4">
        <h2 class="h5 mb-3">
          <i class="bi bi-person-bounding-box me-2"></i>Your Character
        </h2>
        <div th:if="${character != null}">
          <p class="mb-1">
            <strong>Name:</strong> 
            <span th:text="${character.name}">Name</span>
          </p>
          <p class="mb-1">
            <strong>Lore Points:</strong> 
            <span th:text="${character.lorePoints}">0</span>
          </p>
          <p class="mb-0">
            <strong>Description:</strong>
          </p>
          <p th:text="${character.description}">Character description…</p>
        </div>
        <div th:if="${character == null}" class="alert alert-secondary mb-0">
          You don’t have a character yet. Create one from the <a href="/characters" class="alert-link">Characters</a> page.
        </div>
      </section>
      <!-- Stories Sections -->
      <section class="bg-body-tertiary border rounded-3 p-3 p-md-4 mb-4">
        <h2 class="h6 mb-3">
          <i class="bi bi-journal-text me-2"></i>Stories You Created
        </h2>
        <p th:if="${#lists.isEmpty(createdStories)}" 
           class="text-secondary mb-0">No stories created yet.</p>
        <ul class="list-group list-group-flush" 
            th:if="${!#lists.isEmpty(createdStories)}">
          <li class="list-group-item bg-body-tertiary" 
              th:each="s : ${createdStories}">
            <span th:text="${s.title}">Story title</span>
            <a th:href="@{'/stories/' + ${s.id}}" 
               class="btn btn-sm btn-outline-light float-end">View</a>
          </li>
        </ul>
      </section>
      <!-- Contributed Stories Section -->
      <section class="bg-body-tertiary border rounded-3 p-3 p-md-4">
        <h2 class="h6 mb-3">
          <i class="bi bi-pen me-2"></i>Stories You Contributed To
        </h2>
        <p th:if="${#lists.isEmpty(contributedStories)}" 
           class="text-secondary mb-0">No contributions yet.</p>
        <ul class="list-group list-group-flush" 
            th:if="${!#lists.isEmpty(contributedStories)}">
          <li class="list-group-item bg-body-tertiary" 
              th:each="s : ${contributedStories}">
            <span th:text="${s.title}">Story title</span>
            <a th:href="@{'/stories/' + ${s.id}}" 
               class="btn btn-sm btn-outline-light float-end">View</a>
          </li>
        </ul>
      </section>
    </main>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
            crossorigin="anonymous"></script>
  </body>
</html>