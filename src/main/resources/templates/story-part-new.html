<!--
    File Name: story-new.html
    Created By: Wyatt Bechtle
    Created On: 10/15/2025
    Purpose: Provides a form to create a new story part.

    Updated By:   
    Update Notes: 

-->
<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" data-bs-theme="dark">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>New Story Part</title>

      <!-- Bootstrap -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

      <!-- Loreweave custom fantasy theme -->
      <link rel="stylesheet" th:href="@{/css/styles.css}">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
          rel="stylesheet">
  </head>
  <body class="profile-body story-part-page">
  <video id="flyingpages-bg" autoplay muted loop playsinline>
      <source src="/images/flyingpages.mov" type="video/mp4">
  </video>


  <!-- Page transition overlay -->
  <div id="page-transition"></div>

  <!-- Shared fantasy navbar (same as profile) -->
  <div th:replace="~{fragments/navbar :: navbar}"></div>

  <main class="container py-4 story-part-new-main">

  <h1>Create new story part</h1>

      <form th:action="@{/story-parts}" method="post">
        <!-- For spring security - prevents CSRF-->
        <input type="hidden"
               th:name="${_csrf?.parameterName}"
               th:value="${_csrf?.token}" />

        <!-- Hidden input to hold the story ID -->
        <input type="hidden"
               name="storyId"
               th:value="${storyId}"/>

        <!-- Story Part Title -->
        <div class="mb-3">
          <label class="form-label">Content</label>
          <textarea class="form-control"
                    name="content"
                    rows="8"
                    required></textarea>
        </div>
        <!-- Submit and Cancel Buttons -->
        <button type="submit"
                class="btn btn-success">Save</button>
        <a th:href="@{|/story/${storyId}|}"
           class="btn btn-outline-secondary">Cancel</a>
      </form>
    </main>
  <!-- Footer -->
  <footer>
      <p>&copy; 2025 Loreweave | A world where every player becomes an author.</p>
  </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
            crossorigin="anonymous"></script>
  </body>
</html>