<!--
    File Name: character-detail.html
    Created By: Wyatt Bechtle
    Created On: 10/14/2025
    Purpose: To provide character detail capabilities to the loreweave application.

    Updated By:   Wyatt Bechtle
    Update Notes: Updated route to match new routing scheme.
-->
<!doctype html>
<html lang="en" xmlns:th="https://www.thymeleaf.org/" data-bs-theme="dark">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title th:text="${character != null ? character.name : 'Character'}">Character</title>
      <!-- Bootstrap -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

      <!-- Loreweave custom fantasy theme -->
      <link rel="stylesheet" th:href="@{/css/styles.css}">
    <!-- Bootstrap icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" 
          rel="stylesheet">
  </head>
  <body class="profile-body">

  <!-- Page transition overlay -->
  <div id="page-transition"></div>

  <!-- Shared fantasy navbar (same as profile) -->
  <div th:replace="~{fragments/navbar :: navbar}"></div>
    <main class="container my-4">

      <!-- Back to Characters Link -->
        <a class="btn btn-link p-0 mb-3 character-back-link" th:href="@{/characters}">
            <i class="bi bi-arrow-left me-1"></i>Back to Characters
        </a>

        <!-- Character Details Section -->
      <section class="bg-body-tertiary border rounded-3 p-3 p-md-4 mb-4">
        <div class="d-flex align-items-start justify-content-between">
          <!-- Character Name -->
          <h1 class="h4 mb-0 d-flex align-items-center">
            <i class="bi bi-person-bounding-box me-2"></i>
            <span th:text="${character.name}">Character Name</span>
          </h1>
          <!-- Lore Points Badge -->
          <span class="badge text-bg-primary fs-6" th:text="${character.lorePoints}">0</span>
        </div>
        <hr class="my-3">
        <!-- Creator  -->
        <p class="mb-1">
          <strong>Creator:</strong>
          <span th:text="${character.user != null ? character.user.username : 'Anonymous'}">username</span>
        </p>
        <!-- Description -->
        <p class="mb-0"><strong>Description:</strong></p>
        <p class="mb-0" th:text="${character.description}">Character descriptionâ€¦</p>
      </section>
      <!-- Stories Created By This Character's Owner -->
      <section class="bg-body-tertiary border rounded-3 p-3 p-md-4 mb-4">
        <h2 class="h6 mb-3">
          <i class="bi bi-journal-text me-2"></i>Stories Starring <span th:text="${character.name}">Name</span>
        </h2>
        <!-- No stories message -->
        <p class="text-secondary mb-0" th:if="${#lists.isEmpty(createdStories)}">
          No stories created yet.
        </p>
        <!-- List of stories -->
        <ul class="list-group list-group-flush" th:if="${!#lists.isEmpty(createdStories)}">
          <li class="list-group-item bg-body-tertiary d-flex align-items-center justify-content-between"
              th:each="s : ${createdStories}">
            <!-- Story title-->
            <span th:text="${s.title}">Story title</span>
            <!-- View story button -->
            <a th:href="@{'/story/' + ${s.id}}"
               class="btn btn-sm btn-outline-light">
              View
            </a>
          </li>
        </ul>
      </section>
      <!-- Stories Contributed To By This Character's Owner -->
      <section class="bg-body-tertiary border rounded-3 p-3 p-md-4">
        <h2 class="h6 mb-3">
          <i class="bi bi-pen me-2"></i>Stories Featuring <span th:text="${character.name}">Name</span>
        </h2>
        <!-- No contributions message -->
        <p class="text-secondary mb-0" th:if="${#lists.isEmpty(contributedStories)}">
          No contributions yet.
        </p>
        <!-- List of contributed stories -->
        <ul class="list-group list-group-flush" th:if="${!#lists.isEmpty(contributedStories)}">
          <li class="list-group-item bg-body-tertiary d-flex align-items-center justify-content-between"
              th:each="s : ${contributedStories}">
            <!-- Story title -->
            <span th:text="${s.title}">Story title</span>
            <!-- View story button -->
            <a th:href="@{'/story/' + ${s.id}}"
               class="btn btn-sm btn-outline-light">
              View
            </a>
          </li>
        </ul>
      </section>
    </main>
  <footer>
      <p>&copy; 2025 Loreweave | A world where every player becomes an author.</p>
  </footer>
    <!-- Bootstrap JS link-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
            crossorigin="anonymous"></script>
  </body>
</html>
